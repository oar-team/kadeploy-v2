<refentry id="kacreateenv">

  <refmeta>
    <refentrytitle>kacreateenv</refentrytitle>
    <manvolnum>1</manvolnum>
  </refmeta>
  
  <refnamediv>
    <refname>karecordenv</refname>
    <refpurpose> registers a environment </refpurpose>
  </refnamediv>
  


  <refsect1>
    <title>SYNOPSIS</title>
    <command>karecordenv</command>
    <command>[-n  | --name </command>registration_name]
    <command>[-v  | --version </command>version]            # default is 1
    <command>[-d  | --description </command>description]
    <command>[-a  | --author </command>author_email]
    <command>[-fb | --filebase </command>environment_image_path]
    <command>[-ft | --filesite </command>post-installation_file_path]
    <command>[-s  |  --size </command>sizeMo]
    <command>[-i  |  --initrdpath </command>initrdpath]        # default is none
    <command>[-k  |  --kernelpath </command>kernel_path]
    <command>[-p  |  --param </command>kernel_param]
    <command>[-fd | --fdisktype </command>fdisk_type]         # default is 82
    <command>[-fs | --filesystem </command>file_system]        # default is ext2
    <command>[-fe | file_environment </command>file_environment]
    
Name, kernel_path, environment_image_path and post-installation_file_path must be defined
  </refsect1>
  
  <refsect1>
    <title>DESCRIPTION</title>

    karecordenv registers an environment in order to be able to use it with the deployment system.
  </refsect1>
      
  <refsect1>	
    <title>OPTIONS</title>
    
    
    <command>-n,  --name registration_name</command>the registration name for the environment
    <command>-v,  --version version</command>the version number of the environment (if needed) ; default is 1
    <command>-d,  --description "description"</command>a brief description of the environment
    <command>-a,  --author author_email</command>the author email address
    <command>-fb, --filebase environment_image_path</command>the complete path to the environment image
    <command>-ft, --filesite post-installation_file_path</command>the complete path to the post-installation file
    <command>-s,  --size size (Mo)</command>the size of the environment ; in order to perform partition size check before a deployment
    <command>-i,  --initrdpath</command>the complete initrd path in the environment (including intrd name)
    <command>-k,  --kernelpath kernel_path</command>the complete kernel path in the environment (including kernel name). You have to use "chainload" keyword, when deploying a "dd" image.
    <command>-p,  --param</command>arguments passed to kernel at boot (<verb>root</verb> parameter is set automatically), if left empty, default can be configured
    <command>-fd, --fdisktype fdisk_type</command>the fdisk type ; default is 82
    <command>-fs, --filesystem file_system</command>the file system type ; default is ext2
    <command>-fe, --file_environment file_environment</command> record and environment from file.
  </refsect1>
      
  <refsect1>
    <title>EXAMPLE</title>
    <para>
      Registers a debian image whose features are explicitly given in parameter
      <programlisting>
	karecordenv -n debian -v 2 -d "debian maison" -a katools@imag.fr -fb file://home/nis/jleduc/ImagesDistrib/image_Debian_current.tgz -ft file://home/nis/jleduc/Boulot/postinstall/traitement.tgz -size 650 -k /boot/vmlinuz -i /initrd -p "console=ttyS0,38400n8 ETH_DRV=tg3" -fd 83 -fs ext2
      </programlisting>
    </para>

    <para>
      Registers a debian from file
      <programlisting>
$cat &gt; /tmp/myenv &lt;&lt; EOF
name = debian
id = 7
version = 2
description = none
author = @
filebase = file://usr/local/grid5000/image/rootfs.tgz
filesite = file://usr/local/grid5000/image/postinstall.tgz
size = 100
initrdpath = /boot/initrd.img-2.6.8-1-686-smp
kernelpath = /boot/vmlinuz-2.6.8-1-686-smp
kernelparam =
fdisktype = 83
filesystem = ext2
siteid = 1
user = jpeyrard
EOF	

$karecordenv -fe /tmp/myenv
      </programlisting>
    </para>     
  </refsect1>

  <refsect1>
    <title>COPYRIGHTS</title>
    <para>
      Copyright  2004 Laboratoire Id-Imag (http://www-id.imag.fr). This software is licensed under the GNU Library General Public License. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
    </para>
  </refsect1>
</refentry>
