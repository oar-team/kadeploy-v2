  <refentry id="kaaddnode">
    
    <refmeta>
      <refentrytitle>kaaddnode</refentrytitle>
      <manvolnum>1</manvolnum>
    </refmeta>
    
    <refnamediv>
      <refname>kaaddnode</refname>
      <refpurpose>registers nodes and their disk and partition features</refpurpose>
    </refnamediv>



<refsect1>
    <title>SYNOPSIS</title>
    <para>
      <command>kaaddnode info_file</command>
    </para>
  </refsect1>
  

  <refsect1>DESCRIPTION
    <para>
      kaaddnode registers nodes and their disk and partition features for them to be available to the deployment system. It can be used at the very beginning to describe a whole cluster (after having completed the installation for instance) or later when new nodes are added to a cluster already managed by the deployment system.
      </para>
      <para>
      info_file is the name of the file that describes all the information the system needs. It contains two main parts and has to be formacommanded as described below:
    </para>
	<programlisting>
# first part : node set description

node_name1    mac_address1    ip_address1
node_name2    mac_address2    ip_address2
node_name3    mac_address3    ip_address3
...           ...             ...
	</programlisting>
    <para>
N.B. : each node is described on a separate line; fields on each line are separated by tabs or spaces. 
    </para>
<programlisting>
# second part : descriptive information about the type of disk and the partitioning

device_name    device_size
partition_number1    partition_size1    deployed_env1
partition_number2    partition_size2    deployed_env2
	      partition_number3    partition_size3    deployed_env3
...		     ...		...
</programlisting>
    <para>
      N.B. : each partition is described on a separate line; fields on each line are separated by tabs or spaces. All size are given in Mbytes. The specified deployed_env should already exist in the deployment system otherwise default value 'undefined' will be switched to the declared one during the execution.
      First and second part are separated by a - strange and arbitrary - line starting with the following characters : \#. Empty lines and commentaries (starting with #) are ignored. Before doing any modification in the deployment system database, kaaddnode tries to check if the expected description syntax is respected in both parts.
    </para>
  </refsect1>

  <refsect1>
    <title>EXAMPLE</title>
    <para>
      <command>kaaddnode description.txt</command>
    </para>
    <para>
      with description.txt as below:
    </para>
    <programlisting>
# Nodes
node1    00:02:73:49:9C:8D    192.168.10.1
node2    00:02:73:49:9C:8E    192.168.10.2
...	 ...		      ...

\#

# Disk and Parts
hda  80000
1    5000    swap
2    20000   debian
 ...  ...     ...
    </programlisting>
  </refsect1>
</refentry>
